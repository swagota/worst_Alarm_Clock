<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE ETERNAL DEADLINE</title>
    <style>
        body { 
            background-color: #ffeef8; 
            font-family: 'Comic Sans MS', cursive; 
            display: flex; 
            flex-direction: column; /* Stacks clock above box */
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            overflow: hidden;
            transition: background 0.05s;
        }

        /* The Clock Emoji Area - Sitting in the pink space */
        #mascot {
            font-size: 80px; /* Big and clear */
            margin-bottom: 20px; /* Space between clock and white box */
            filter: drop-shadow(0 5px 15px rgba(255, 105, 180, 0.4));
            transition: transform 0.3s;
        }

        .box {
            background: white; 
            padding: 40px; 
            border-radius: 30px;
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3); 
            text-align: center;
            border: 8px solid #ffb6c1; 
            position: relative; 
            width: 85%; 
            max-width: 450px;
            z-index: 10;
        }

        h1 { color: #ff69b4; font-size: 22px; margin: 0; }
        .btn-container { display: flex; justify-content: center; gap: 20px; margin-top: 30px; }
        
        button {
            padding: 15px 30px; border: none; border-radius: 50px;
            font-weight: bold; cursor: pointer; font-size: 18px; transition: 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* 1600 RPM ROTATION BLUR */
        .eye-bleed-spin {
            animation: hyperDrive 0.037s infinite linear !important;
            background: #000000 !important; 
            color: #000000 !important; 
            border-color: #111 !important;
            box-shadow: 0 0 100px #ff00ff !important;
        }

        @keyframes hyperDrive {
            0% { transform: rotate(0deg) scale(1.6); }
            100% { transform: rotate(360deg) scale(1.6); }
        }

        .no-cursor { cursor: none !important; }
    </style>
</head>
<body>

    <div id="mascot">‚è∞</div>

    <div class="box" id="mainBox">
        <h1 id="message">Are you sure to enter in this eternity?</h1>
        <div id="btnGroup" class="btn-container"></div>
    </div>

<script>
    let stage = 1;
    const box = document.getElementById('mainBox');
    const msg = document.getElementById('message');
    const mascot = document.getElementById('mascot');
    const btnGroup = document.getElementById('btnGroup');

    const content = {
        1: { text: "Are you sure to enter in this eternity?", b1: "YES", b1C: "#b2fab4", b2: "NO", b2C: "#ffabab", rev: false },
        2: { text: "Wait... are you really sure?<br>Think about your <b>offline deadlines</b>.", b1: "NO", b1C: "#00FF00", b2: "YES", b2C: "#FF0000", rev: false },
        3: { text: "Final Step:<br>I am loading this page for you. Ready?", b1: "YES PROCEED", b1C: "#00FFFF", b2: "NO I'M LEAVING", b2C: "#FF00FF", rev: true }
    };

    function renderStage() {
        const s = content[stage];
        msg.innerHTML = s.text;
        btnGroup.innerHTML = "";
        const b1 = createBtn(s.b1, s.b1C);
        const b2 = createBtn(s.b2, s.b2C);
        
        if(!s.rev) { 
            btnGroup.appendChild(b1); 
            btnGroup.appendChild(b2); 
        } else { 
            btnGroup.appendChild(b2); 
            btnGroup.appendChild(b1); 
        }
    }

    function createBtn(txt, col) {
        const b = document.createElement('button');
        b.innerText = txt; b.style.backgroundColor = col;
        b.onclick = () => handleChoice(txt);
        return b;
    }

    function handleChoice(choice) {
        const isPositive = (choice === "YES" || choice === "YES PROCEED");

        if (isPositive) {
            if (stage < 3) { 
                startSilentSpin(); 
            } else { 
                window.location.href = "calendar.html"; 
            }
        } else {
            if (stage === 1) { 
                alert("Closing portal...");
                window.close(); 
            } else { 
                stage--; 
                renderStage(); 
            }
        }
    }

    function startSilentSpin() {
        box.classList.add('eye-bleed-spin');
        document.body.classList.add('no-cursor');
        mascot.style.display = "none"; 
        
        let elapsed = 0;
        const duration = 2500; 
        const intervalTime = 60; 

        const chaosInterval = setInterval(() => {
            elapsed += intervalTime;
            const colors = ["#ff00ff", "#00ffff", "#ff0000", "#00ff00", "#ffff00"];
            document.body.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

            if (elapsed >= duration) {
                clearInterval(chaosInterval);
                box.classList.remove('eye-bleed-spin');
                document.body.classList.remove('no-cursor');
                document.body.style.backgroundColor = "#ffeef8";
                mascot.style.display = "block"; 
                stage++;
                renderStage();
            }
        }, intervalTime);
    }

    renderStage();
</script>
</body>
</html>
